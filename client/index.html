<!DOCTYPE HTML>
<html>
<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:300|Roboto:300">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,400i,600">
  <style>
    body {
      font-family: 'Rubik', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    }
    pre {
      font-family: 'Roboto Mono', Menlo, Monaco, monospace;
      font-size: 11px;
    }
    img {
      height: 40px;
      vertical-align: middle;
      padding-left: 8px;
    }
    a:hover, a:focus {
      text-decoration: underline;
    }
    a {
      color: #E10098;
      text-decoration: none;
    }
  </style>
  <script src="main.js"></script>
</head>
<body>
  <div id="elm-stuff"></div>
  <script>
    console.log("Creating elm-stuff");
    var app = Elm.Main.init({
      node: document.getElementById('elm-stuff')
    });
    console.log(app);

    // Create your WebSocket.
    var socket = new WebSocket('ws://127.0.0.1:9001');

    // When a command goes to the `sendMessage` port, we pass the message
    // along to the WebSocket.
    app.ports.sendMessage.subscribe(function(message) {
        console.log("send message", message);
        socket.send(message);
    });

    // When a message comes into our WebSocket, we pass the message along
    // to the `messageReceiver` port.
    socket.addEventListener("message", function(event) {
        console.log("recv message", event);
        app.ports.messageReceiver.send(event.data);
    });
  </script>
</body>
</html>
